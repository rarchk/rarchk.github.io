\documentclass[tikz]{standalone}
% Custom packages 
\usepackage[latin1]{inputenc}
\usetikzlibrary{shapes,arrows,shapes.geometric}


% Starting drawing 
\title{Tikz Standalone}
\begin{document}

% Declare layers
\pgfdeclarelayer{background}
\pgfsetlayers{background,main}

% Styles
\tikzstyle{information text}=[text badly centered,font=\small,text width=3cm]
\tikzstyle{database}=[cylinder, cylinder uses custom fill,
	      cylinder body fill=orange!50,
	            cylinder end fill=orange!50,
		          shape border rotate=90,
			        aspect=0.25,
				      draw]
				      \tikzstyle{broker}=[ellipse, draw,thick, fill=red!20,minimum height=2em]
				      \tikzstyle{server}=[rectangle, draw, fill=blue!20,thick, 
				      	        text width=3em, text centered, minimum height=5em,node distance=3cm]
						\begin{tikzpicture}[scale=.8,cap=round]

						\node[server] (serv) at (4,10) {Bus API Server};

\foreach \y in {0,4,-4}
{
	  \draw[draw,dashed,color=blue!80,thick] (2.5-\y,3.9) rectangle (5.5-\y,7);
	    \draw[->,thick] (4-\y,4.8 ) -- (4-\y,5.6 );
	      \node[database,fill=green!20] (cache1) at (4-\y,6) {Cache};
	        \node[broker] (broker) at (4- \y ,4.5) {Broker};

		  \draw[<->,color=brown,thick,dashed,latex-latex] (4-\y,3.9) -- (0-\y/50,2.1);
		    \draw[<->,color=brown,thick,dashed,latex-latex] (4-\y,7) -- (4-\y/50,8.9);
		      \draw[<->,color=red,latex-latex,ultra thick] (4-\y,3.9) -- (6-\y/50,1.2);
}
\draw[fill=blue!80] (9.8,5.5) circle (0.1);
\draw[fill=blue!80] (10.1,5.5) circle (0.1);
\draw[fill=blue!80] (10.4,5.5) circle (0.1);
\draw[draw,dashed,color=blue!80,thick] (2.7 + 8,3.9) rectangle (5.7 + 8,7);

\draw[draw,dashed,color=blue!80,thick] (-1.5,0.3) rectangle (1.5,2.1);
\node[database] (db1) at (0,1) {Mongo DB};
\node [information text, below of=db1] {\textbf{\vdots}\\ Mongo Instances};

\node[cloud, draw,cloud puffs=10,cloud puff arc=120, aspect=2, inner ysep=1em,fill=gray!20] (internet) at (6,0) {Internet};
    
\end{tikzpicture}

\end{document}
